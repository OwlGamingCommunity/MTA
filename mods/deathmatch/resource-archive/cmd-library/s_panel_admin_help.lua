--MAXIMElocal mysql = exports.mysqllocal commands = {{}, {}, {}, {}, {}}local scriptUpdates = ""function fetchCommands()	commands = {{}, {}, {}, {}, {}}	local count = 0	local tempCm = {}	local cmSQL = mysql:query("SELECT * FROM `commands_library` WHERE `cmType`='1' ORDER BY `cmCreationDate` DESC ") or false	while true do		local row = mysql:fetch_assoc(cmSQL) or false 		if not row then 			break 		end		table.insert(tempCm, { tonumber(row["cmID"]), tonumber(row["cmLevel"]),row["cmName"],row["cmExplanation"]} )		count = count + 1	end	mysql:free_result(cmSQL)		for key, cmd in pairs(tempCm) do		if cmd[1] == -1 then			scriptUpdates = cmd[4]		else			table.insert(commands[cmd[2]], {cmd[3], cmd[4], cmd[1]} )		end	end		outputDebugString(" Fetched "..count.." admin cmds sucessfully from SQL")	return countendfunction fetchCmdsManually(thePlayer, commandName)	if not exports.integration:isPlayerLeadAdmin(thePlayer) then		outputChatBox("Only Head Admins and above can access /"..commandName..".", thePlayer, 255,0,0)		return false	end	outputChatBox(" Fetched "..fetchCommands().." admin cmds sucessfully from SQL",thePlayer)endaddCommandHandler("fetchah", fetchCmdsManually)function showAdminCmds(thePlayer, commandName)	if exports.integration:isPlayerTrialAdmin(thePlayer) and commands then		triggerClientEvent(thePlayer, "admin-system:showadmincmds", thePlayer, commands, scriptUpdates)	endendaddCommandHandler("ah", showAdminCmds)function initiateShit ()	fetchCommands()	setTimer(fetchCommands, 60000*60*3, 0) -- Every 3 hoursendaddEventHandler("onResourceStart", getResourceRootElement(getThisResource()), initiateShit)function delCmd(thePlayer, cmdID, cmdName)	if mysql:query("DELETE FROM `commands_library` WHERE `cmID`='"..tostring(cmdID).."' AND `cmType`='1' ") then		local adminUsername = getElementData(thePlayer, "account:username")		local adminTitle = exports.global:getPlayerAdminTitle(thePlayer)		exports.global:sendMessageToAdmins("[CMD LIBRARY]: ".. adminTitle.. " "..adminUsername.." has deleted admin command /"..cmdName.." from /ah.", true)		fetchCommands()		triggerClientEvent(thePlayer, "admin-system:showadmincmds", thePlayer, commands, scriptUpdates)	else		outputChatBox("Failed to delete cmd /"..cmdName..". DB Error.", thePlayer, 255,0,0)	endendaddEvent("admin-system:delCmd", true)addEventHandler("admin-system:delCmd", getRootElement(), delCmd)function saveCmd(thePlayer, cmdID, cmdName, cmdEx, cmdAccess, cmdType)	if cmdID then		if mysql:query("UPDATE `commands_library` SET `cmType`='"..cmdType.."', `cmLevel`='"..cmdAccess.."', `cmName`='"..tostring(cmdName):gsub("'","''").."', `cmExplanation`='"..tostring(cmdEx):gsub("'","''").."' WHERE `cmID`='"..cmdID.."' ") then			local adminUsername = getElementData(thePlayer, "account:username")			local adminTitle = exports.global:getPlayerAdminTitle(thePlayer)			exports.global:sendMessageToAdmins("[CMD LIBRARY]: "..adminTitle.." "..adminUsername.." has modified admin command /"..cmdName.." ("..cmdEx..")", true)			fetchCommands()			triggerClientEvent(thePlayer, "admin-system:showadmincmds", thePlayer, commands, scriptUpdates)		else			outputChatBox("Failed to modify cmd /"..cmdName..". DB Error.", thePlayer, 255,0,0)		end	else		if mysql:query("INSERT INTO `commands_library` SET `cmType`='"..cmdType.."', `cmLevel`='"..cmdAccess.."', `cmName`='"..tostring(cmdName):gsub("'","''").."', `cmExplanation`='"..tostring(cmdEx):gsub("'","''").."' ") then			local adminUsername = getElementData(thePlayer, "account:username")			local adminTitle = exports.global:getPlayerAdminTitle(thePlayer)			exports.global:sendMessageToAdmins("[CMD LIBRARY]: "..adminTitle.." "..adminUsername.." has added admin command /"..cmdName.." ("..cmdEx..")", true)			fetchCommands()			triggerClientEvent(thePlayer, "admin-system:showadmincmds", thePlayer, commands, scriptUpdates)		else			outputChatBox("Failed to add cmd /"..cmdName..". DB Error.", thePlayer, 255,0,0)		end	endendaddEvent("admin-system:saveCmd", true)addEventHandler("admin-system:saveCmd", getRootElement(), saveCmd)function updateScriptSQL(thePlayer, content)	if mysql:query("UPDATE `commands_library` SET `cmExplanation`='"..tostring(content):gsub("'","''").."' WHERE `cmID`='-1' AND `cmType`='1' ") then		fetchCommands()		triggerClientEvent(thePlayer, "admin-system:showadmincmds", thePlayer, commands, scriptUpdates)	else		outputChatBox("Failed to update script changes. DB Error.", thePlayer, 255,0,0)	endendaddEvent("admin-system:updateScript", true)addEventHandler("admin-system:updateScript", getRootElement(), updateScriptSQL)